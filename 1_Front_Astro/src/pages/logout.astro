---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Cerrar sesi√≥n" description="Finaliza la sesi√≥n local protegida en Astro">
	<main>
		<section class="card">
			<h1>Hasta pronto üëã</h1>
			<p data-message>Estamos cerrando tu sesi√≥n‚Ä¶</p>
			<a class="ghost" href="/">Volver al inicio</a>
		</section>
	</main>

	<script type="module" is:inline>
		import { readSession, clearSession } from '/src/lib/session.ts';

		(function performLogout() {
			const messageEl = document.querySelector('[data-message]');
			const session = readSession();
			if (!session) {
				messageEl.textContent = 'No hab√≠a una sesi√≥n activa.';
				return;
			}

			clearSession();
			messageEl.textContent = 'Sesi√≥n local eliminada. Puedes volver a iniciar cuando gustes.';
		})();
	</script>
</Layout>

<style>
	.card {
		margin: 4rem auto;
		max-width: 480px;
		text-align: center;
	}

	.ghost {
		display: inline-block;
		margin-top: 1.5rem;
	}
</style>
